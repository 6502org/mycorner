<script type="text/javascript" src="http://ads.tripod.lycos.co.uk/ad/tripodbar/framejs.php?cat=memberpages.other&amp;CC=uk&amp;ord=3456a735&amp;adpref=&amp;gg_bg=&amp;gg_template="></script>
<HTML>
<!-- Mirrored from members.lycos.co.uk/leeedavison/misc/onlight/index.html by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 17 Jan 2009 20:57:31 GMT -->
<HEAD><TITLE>The best ON light</TITLE>
<META name="description" content="PRNG LED display"></HEAD>
<BODY BACKGROUND="../../back.png" LINK="#0000EE" VLINK="#0000CC">
<TABLE BORDER=0 WIDTH=100% CELLSPACING=0 CELLPADDING=0><TR><TD WIDTH=20%>
<A HREF="../index.html"><IMG SRC="../../up.gif" BORDER=0 ALT="Up one"></A></TD>
<TD WIDTH=60% ALIGN=CENTER><B><FONT SIZE=+1>The best ON light. </FONT></B>
<FONT SIZE=-1>By Lee Davison.</FONT></TD><TD WIDTH=20%><A HREF="../../index-2.html">
<IMG SRC="../../epc.png" ALIGN=RIGHT BORDER=0 ALT="Up to top"></A></TD></TR></TABLE>
<HR>
<B><U>Introduction.</U></B>
<A HREF="lighton.html"><IMG SRC="lighton_s.jpg" ALIGN=RIGHT HSPACE=8 BORDER=1
 ALT="On light"></A>
<BLOCKQUOTE><P ALIGN=JUSTIFY>
 I originally built the first one of these quite a few years back when your average PC
 was a beige box and, if it was expensive, had an LED display showing the processor
 clock spee. I gave that one to my brother and, once I'd gathered all the parts together,
 I built a new one for myself.
</BLOCKQUOTE>
<B><U>The circuit.</U></B>
<BLOCKQUOTE><P ALIGN=JUSTIFY>
 The circuit is a 31 bit maximal length pseudo random number generator constructed from
 four dual 4 bit shift registers and one gate from a quad exclusive OR gate. 30 of the
 bits from this 32 bit shift register are used to drive the LEDs, the two others are
 used for feedback. The generator is clocked at about 2Hz to give an interesting, but
 unobtrusive, constantly changing display.
<P ALIGN=JUSTIFY>
 The clock is generated by an oscillator formed by two more of the exclusive OR gates, a
 100K variable resistor and a 10uF capacitor. A further 1M resistor is used to stop the
 capacitor being discharged via the protection diodes on the first gate. This circuit has
 a fairly slow rise and fall time which may cause clocking problems so this is sped up by
 the fourth exclusive OR gate. All three gates used to generate the clock are used as
 inverters with one input tied high.<P><A NAME=diagram></A>
<CENTER><A HREF="diagram.html"><IMG SRC="diagram.png" HSPACE=8 WIDTH=600 BORDER=1
 ALT="     Circuit diagram
Click for full size image"></A></CENTER>
<P ALIGN=JUSTIFY>
 Power for the clock and shift registers is provided by the battery when the main 5v is
 absent. This means that the sequence continues regardless of the main power and does not
 start, or even fail to start, from the same point each time the main power is turned on.
 The LEDs are supplied only by the main power and are all reverse biased when the circuit
 is running from the battery.
<BR clear=all>
</BLOCKQUOTE><A NAME=construct></A>
<A HREF="construct.html"><IMG SRC="construct_s.jpg" ALIGN=RIGHT HSPACE=8 BORDER=1
 ALT="Layout of parts"></A>
<B><U>Construction.</U></B>
<BLOCKQUOTE><P ALIGN=JUSTIFY>
 The display is the most difficult part to construct as this is the very visible part and
 any defects here will show. The LEDs are mounted on 0.1" stripboard spaced 0.4" between
 centers in both directions. Surplus 5mm LEDs of various colours were used and all are
 mounted flush to the board, this is by far the easiest way to get all the heights the
 same. This board has a couple of eye tags soldered to it which are used to bolt the
 board to the fron two 3.5" drive mount holes.
<P ALIGN=JUSTIFY>
 A piece of grey tinted perspex was cut to be an inteference fit in the 3.5" drive bezel.
 This goes some way to hiding the board that the LEDs are mounted on but not far enough.
 To improve the appearance further a backing was made by drawing up a template and
 printing it onto <A HREF="card.html">thin card</A>. This was then cut out and the
 holes punched with a hand punch. Once it had been test fitted, the holes are a very snug
 fit round the LEDs, it was painted matte black to make it almost invisible behind the
 perspex.
<P ALIGN=JUSTIFY>
 The rest of the electronics are mounted on another piece of stripboard that is  bolted
 to other drive mounting holes, the connection between the two is made with flexible
 wires. Power is supplied to the main board via a disk drive power connector soldered
 onto the edge of the board.
<P ALIGN=JUSTIFY>
 A rather large NiCad battery, that powers the number generator when the main power is
 off, is mounted on a double sided sticky pad at the back of the bay. This battery could
 be much smaller, a coin cell would probably work, but was what was on hand at the time.
<BR clear=all>
</BLOCKQUOTE><A NAME=build></A>
<A HREF="build.html"><IMG SRC="build_s.jpg" ALIGN=RIGHT HSPACE=8 BORDER=1
 ALT="Front view"></A>
<B><U>First power on.</U></B>
<BLOCKQUOTE><P ALIGN=JUSTIFY>
 If the shift registers first power on with all bits low, all the LEDs lit, this state
 will never change. To force some 1's into the sequence one of the shift register data
 inputs can be shorted to Vdd for a second or two. This should be enough to get the
 generator into one of it's maximal length sequence states.
</BLOCKQUOTE>
<B><U>Extras.</U></B>
<BLOCKQUOTE>
<P ALIGN=JUSTIFY>
 A five second, low res, video of the light running is <A HREF="leds.mpg">here</A>.
<P ALIGN=JUSTIFY>
 There is little more on pseudo random number generation <A
 HREF="../../6502/code/prng.html">here</A>.
<BR clear=all>
</BLOCKQUOTE>
<HR>
<TABLE BORDER=0 WIDTH=100% CELLSPACING=0 CELLPADDING=0><TR>
<TD WIDTH=30%><FONT SIZE=-1>Last page update: 5th March, 2006.</FONT></TD>
<TD WIDTH=40% ALIGN=CENTER><A HREF="mailto:leeedavison@lycos.co.uk">e-mail me 
<IMG SRC="../../eml_sm.png" ALIGN=CENTER BORDER=0 ALT="e-mail"></A></TD>
<TD WIDTH=30%></TD></TR></TABLE></BODY>
<!-- Mirrored from members.lycos.co.uk/leeedavison/misc/onlight/index.html by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 17 Jan 2009 20:57:33 GMT -->
</HTML>
</pre></xmp></noscript>

<script language="javascript" src="http://ads.tripod.lycos.co.uk/ad/popunder_lycos_update.php?cat=memberpages.other&amp;CC=uk"></script>

<!-- START RedSheriff Measurement V5.01 -->
<!-- COPYRIGHT 2002 RedSheriff Limited -->
<script language="JavaScript" type="text/javascript"><!--
  var _rsCI='lycos-uk';
  var _rsCG='0';
  var _rsDT=1;
  var _rsSI=escape(window.location);
  var _rsLP=location.protocol.indexOf('https')>-1?'https:':'http:';
  var _rsRP=escape(document.referrer);
  var _rsND=_rsLP+'//secure-uk.imrworldwide.com/';

  if (parseInt(navigator.appVersion)>=4) {
    var _rsRD=(new Date()).getTime();
    var _rsSE=0;
    var _rsSV='';
    var _rsSM=0;
    _rsCL='<scr'+'ipt language="JavaScript" type="text/javascript" src="'+_rsND+'v5.js"><\/scr'+'ipt>';
  } else {
    _rsCL='<img src="'+_rsND+'cgi-bin/m?ci='+_rsCI+'&cg='+_rsCG+'&si='+_rsSI+'&rp='+_rsRP+'">';
  }
  document.write(_rsCL);
//--></script>
<noscript>
<img src="http://secure-uk.imrworldwide.com/cgi-bin/m?ci=lycos-uk&amp;cg=0" alt="">
</noscript>
<!-- END RedSheriff Measurement V5 -->
