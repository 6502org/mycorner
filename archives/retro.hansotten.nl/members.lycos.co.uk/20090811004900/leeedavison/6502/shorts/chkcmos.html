<script type="text/javascript">
window.google_analytics_uacct = "UA-7539432-13";
</script>
<style>
#catfish058b6f1a{PADDING: 0px;MARGIN: 0px 0px -90px;WIDTH: 100%;HEIGHT: 90px;BOTTOM: 0px;POSITION: fixed;}
</style>
<!--[if ie]>
<style>
#catfish058b6f1a{ Z-INDEX: 1000; OVERFLOW: hidden; POSITION: absolute;}
HTML,BODY {OVERFLOW: hidden;WIDTH: auto;HEIGHT: 100%;}
DIV#zip058b6f1a{PADDING: 0px;MARGIN: 0px;OVERFLOW: auto;WIDTH: 100%;HEIGHT: 100%;POSITION: relative;}
</style>
<![endif]-->
<div id="topad058b6f1a"></div>
<html><head><title>6502 Shorts - Check CMOS</TITLE></HEAD>
<body background="../members.lycos.co.uk/leeedavison/back.png" webstripperlinkwas="../../back.png" link="#0000EE" vlink="#0000CC">
<table border=0 width=100% cellspacing=0 cellpadding=0>
<tr><td width=20%><a href="index.html" webstripperlinkwas="index.html">
 <img src="../members.lycos.co.uk/leeedavison/up.gif" webstripperlinkwas="../../up.gif" border=0 alt="Up one"></A></TD>
<td width=60% align=CENTER>
<b><font size=+1>Check CMOS. </FONT></B>
<font size=-1>By Lee Davison.</FONT>
</TD><td width=20%><a href="Dial Protected" onclick="if(confirm('WebStripper Dial Protection\n\nAre you sure you want to open the page http://members.lycos.co.uk/leeedavison/index.html?\n\n(To alter dial protection settings open Options|options in WebStripper)')) {href='http://members.lycos.co.uk/leeedavison/index.html'}else{href='javascript:void(0)'}" webstripperwas="http://members.lycos.co.uk/leeedavison/index.html">
 <img src="../members.lycos.co.uk/leeedavison/epc.png" webstripperlinkwas="../../epc.png" align=RIGHT border=0 alt="Up to top"></A>
</TD></TR></TABLE>
<hr>
<b><u>Introduction.</U></B>
<blockquote><p align=JUSTIFY>
 Check if the code is running on a CMOS or NMOS 6502. You may need to know this if your
 code has timing critical loops or relies on the features of one processor and needs
 different code on the other.
</BLOCKQUOTE>
<b><u>The code.</U></B>
<blockquote><p align=JUSTIFY>
 Nothing particularly fancy, the code simply makes use of the fact that the NMOS 6502
 does not set the zero flag bit when doing decimal adds or subtracts and the CMOS 6502
 does. The result of this is that Zb is set only if the code is run on a CMOS 6502.
<p align=JUSTIFY>
<table cellpadding=8 cellspacing=0 border=1 bgcolor=white><tr><td>
<pre>

	SED			; set decimal mode
	CLC			; clear carry for add
	LDA	#$99		; actually 99 decimal in this case	
	ADC	#$01		; +1 gives 00 and sets Zb on 65C02
	CLD			; exit decimal mode
</PRE>
</TD></TR></TABLE>
<p align=JUSTIFY>
 Enjoy.
</BLOCKQUOTE>
<hr>
<table border=0 width=100% cellspacing=0 cellpadding=0><tr>
<td width=30%><font size=-1>Last page update: 20th March, 2004.</FONT></TD>
<td width=40% align=CENTER><a href="mailto:leeedavison@googlemail.com">e-mail me 
<img src="../members.lycos.co.uk/leeedavison/eml_sm.png" webstripperlinkwas="../../eml_sm.png" align=CENTER border=0 alt="e-mail"></A></TD>
<td width=30%></TD></TR></TABLE></BODY></HTML>
</style></noframes></pre></xmp></noscript>

<div id="catfish058b6f1a" style="display:none"></div>
<script webstripperattrwas="src" webstripperlinkwas="http://ads.mmania.com/displaycf.js.php?r=058b6f1a&cc=uk" type=text/javascript></script>

<script type="text/javascript">
   var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "../WebStripper/protected.html#link=http://www.");
   document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
   try {
      var pageTracker = _gat._getTracker("UA-7539432-13");
      pageTracker._trackPageview();
   } catch(err) {}
</script>
