<HTML><HEAD><TITLE>6502 Shorts - Check CMOS</TITLE></HEAD>
<BODY BACKGROUND="../../back.png" LINK="#0000EE" VLINK="#0000CC">
<TABLE BORDER=0 WIDTH=100% CELLSPACING=0 CELLPADDING=0>
<TR><TD WIDTH=20%><A HREF="index.html">
 <IMG SRC="../../up.gif" BORDER=0 TITLE="Up one"></A></TD>
<TD WIDTH=60% ALIGN=CENTER>
<B><FONT SIZE=+1>Check CMOS. </FONT></B>
<FONT SIZE=-1>By Lee Davison.</FONT>
</TD><TD WIDTH=20%><A HREF="../../index.html">
 <IMG SRC="../../epc.png" ALIGN=RIGHT BORDER=0 TITLE="Up to top"></A>
</TD></TR></TABLE>
<HR>
<B><U>Introduction.</U></B>
<BLOCKQUOTE><P ALIGN=JUSTIFY>
 Check if the code is running on a CMOS or NMOS 6502. You may need to know this if your
 code has timing critical loops or relies on the features of one processor and needs
 different code on the other.
</BLOCKQUOTE>
<B><U>The code.</U></B>
<BLOCKQUOTE><P ALIGN=JUSTIFY>
 Nothing particularly fancy, the code simply makes use of the fact that the NMOS 6502
 does not set the zero flag bit when doing decimal adds or subtracts and the CMOS 6502
 does. The result of this is that Zb is set only if the code is run on a CMOS 6502.
<P ALIGN=JUSTIFY>
<TABLE CELLPADDING=8 CELLSPACING=0 BORDER=1 BGCOLOR=white><TR><TD>
<PRE>

	SED			; set decimal mode
	CLC			; clear carry for add
	LDA	#$99		; actually 99 decimal in this case	
	ADC	#$01		; +1 gives 00 and sets Zb on 65C02
	CLD			; exit decimal mode
</PRE>
</TD></TR></TABLE>
<P ALIGN=JUSTIFY>
 Enjoy.
</BLOCKQUOTE>
<HR>
<TABLE BORDER=0 WIDTH=100% CELLSPACING=0 CELLPADDING=0><TR>
<TD WIDTH=30%><FONT SIZE=-1>Last page update: 20th March, 2004.</FONT></TD>
<TD WIDTH=40% ALIGN=CENTER><A HREF="mailto:leeedavison@googlemail.com">e-mail me 
<IMG SRC="../../eml_sm.png" ALIGN=CENTER BORDER=0 TITLE="e-mail"></A></TD>
<TD WIDTH=30%></TD></TR></TABLE></BODY></HTML>
