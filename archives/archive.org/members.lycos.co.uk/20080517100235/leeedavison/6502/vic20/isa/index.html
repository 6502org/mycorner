<script language="javascript">

myreg=new RegExp("lycos\.co.uk","i");
if ( !myreg.test("'"+top.location+"'") ) {
	nwreg=new RegExp ("http://([^/]+)?(/([a-z0-9A-Z\-\_]+)?[^']+)","i");
	rn=nwreg.exec("'"+self.location+"'");
	if (parent.frames.length==2) { top.location="http://" + rn[1] + rn[2]; }
	else { top.location="http://" + rn[1] + "/" + rn[3]; }
}

if(window == window.top) {
        var address=window.location;
        var s='<html><head><title>'+'</title></head>'+
        '<frameset cols="*,140" frameborder="0" border="0" framespacing="0" onload="return true;" onunload="return true;">'+
        '<frame src="'+address+'?" name="memberPage" marginwidth="0" marginheight="0" scrolling="auto" noresize>'+
		'<frame src="http://ads.tripod.lycos.co.uk/ad/google/frame.php?_url='+escape(address)+'&gg_bg=&gg_template=&mkw=&cat=memberpages.other" name="LycosAdFrame"  marginwidth="0" marginheight="0" scrolling="auto" noresize>'+
        '</frameset>'+
        '</html>';

        document.write(s);      
}
</script>
<HTML>
<HEAD>
<TITLE>Vic 20 ISA slot</TITLE>
<META name="description" content="Vic 20 ISA slot">
</HEAD>
<BODY BACKGROUND="../../../back.png" LINK="#0000EE" VLINK="#0000CC">
<TABLE BORDER=0 WIDTH=100% CELLSPACING=0 CELLPADDING=0>
<TR>
<TD WIDTH=25%>
<A HREF="../index.html#isa">
  <IMG SRC="../../../up.gif" BORDER=0 ALT="Up one"></A></TD>
<TD WIDTH=50% ALIGN=CENTER>
<B><FONT SIZE=+1>Vic 20 ISA slot </FONT></B><FONT SIZE=-1>by Lee Davison</FONT>
</TD>
<TD WIDTH=25%>
<A HREF="../../../index.html">
 <IMG SRC="../../../epc.png" ALIGN=RIGHT BORDER=0 ALT="Up to top"></A>
</TD></TR></TABLE>
<HR>
<A HREF="isaslot.html"><IMG SRC="isaslot_s.jpg" ALIGN=RIGHT BORDER=1 ALT="Vic 20 8 bit ISA
 slot hardware" HSPACE=8></A>
<B><U>Introduction</U></B>
<BLOCKQUOTE><P ALIGN=JUSTIFY>
 I wanted to connect an 8 bit ISA slot, only to access the IO adresse range, to my Vic 20.
 The main reason being to connect a <A HREF="../network/index.html">network card</A> and
 put the Vic on my home network. While I was about it I added a <A
 HREF="../rom_ram/index.html">ROM/RAM expansion</A> as well.
<P ALIGN=JUSTIFY>
 A look round the net found lots of people have had this idea before but there was scant
 evidence that anyone had actually implemented it. So some thought, and lots of routing
 around in the parts box, produced the following.
<BR CLEAR=ALL>
</BLOCKQUOTE>
<B><U>Hardware</U></B>
<BLOCKQUOTE><P ALIGN=JUSTIFY>
 The circuit I came up with appears to the right. As only one card initially was to be
 used, and the interrupt used by that card could be changed by the software, it was
 decided to hardwire the interrupt to IRQ3. This is made into an open collector drive,
 and converted to the correct sense for the 6502, by a single transistor. This transistor
 is not critical and nearly any NPN small signal switching type, e.g. 2SC945, will do.
</BLOCKQUOTE>
<IMG SRC="isa.png" ALIGN=RIGHT BORDER=1 ALT="Vic 20 8 bit ISA
   slot circuit" HSPACE=8>
<BLOCKQUOTE><P ALIGN=JUSTIFY>
 As I'm only interested in the I/O area, and only the lower 1k of that is needed for non
 'Plug-n-Play' accesses making use of one of the Vic 1k RAM areas seemed like the ideal
 solution. However generating these signals was not as easy as it first appeared. It was
 discovered that the VIC chip generates reads to all of the eight 1k blocks at some time
 or other and, with many PC cards being read sequence sensetive, this would not do. Using
 a 1k RAM block was then abandoned and it was decided to use one of the Vic 1k IO areas.
 This initially failed because of the difference between VRW, which is used in expansion
 cartridges to access RAM and ROM, and CRW which is the raw read/write line from the CPU.
 When VRW was used reads to the selected area were ok but writes would generate two
 spurious, narrow read pulses, one either side of the write enable. This is caused by the
 write portion of VRW being shorter than the phase two active cycle.
<P ALIGN=JUSTIFY><A NAME=timing></A>
 So that fixed it right? Wrong. While everything looked ok the 3Com card being used flatly
 refused to talk to the Vic. This turned out to be a subtle detail of ISA I/O timing which
 wasn't immediately obvious. See the details <A HREF="isatiming.html">here</A>.
<P ALIGN=JUSTIFY>
 Most of the connections are direct from the Vic expansion connector and only three need
 to be generated. These are RESET, IO READ and IO WRITE and are generated by a GAL used
 for nearly all the glue logic on the card. The equations for this GAL are in <A
 HREF="isapld.html" NAME=pld>isa.pld</A> and can be compiled with WinCUPL. The fuse file,
 <A HREF="isajed.html" NAME=jed>isa.jed</A> and the compiler listing, <A
 HREF="isatxt.html" NAME=txt>isa.txt</A> are also included.